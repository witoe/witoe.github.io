<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <title>Types and Operations | IGUU</title><meta name="description" content="MY personal blog.">
    <link rel="preload" href="/assets/js/runtime~app.e9b55bcc.js" as="script"><link rel="preload" href="/assets/css/styles.7264dd61.css" as="style"><link rel="preload" href="/assets/js/1812.2c59b7ed.js" as="script"><link rel="preload" href="/assets/js/app.cdc4364a.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.7264dd61.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">IGUU</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Teaching"><span class="title">Teaching</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Teaching"><span class="title">Teaching</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/teaching/web211/" class="nav-link" aria-label="web211"><!--[--><!--]--> web211 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://orcid.org/0000-0003-1706-525X" rel="noopener noreferrer" target="_blank" aria-label="ORCID"><!--[--><!--]--> ORCID <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/iguyong/iguyong.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Teaching"><span class="title">Teaching</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Teaching"><span class="title">Teaching</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/teaching/web211/" class="nav-link" aria-label="web211"><!--[--><!--]--> web211 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://orcid.org/0000-0003-1706-525X" rel="noopener noreferrer" target="_blank" aria-label="ORCID"><!--[--><!--]--> ORCID <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/iguyong/iguyong.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="types-and-operations" tabindex="-1"><a class="header-anchor" href="#types-and-operations" aria-hidden="true">#</a> Types and Operations</h1><p>Objects are pieces of memory, with values and sets of associated operations. Everything we process in Python programs is a kind of obj</p><p>The Python Conceptual Hierarchy:</p><ol><li>Programs are composed of modules.</li><li>Modules contain statements.</li><li>Statements contain expressions.</li><li>Expressions create and process objects.</li></ol><p><img src="/assets/img/2018-09-03-12-05-36.78d17a8f.png" alt="Table 4-1"></p><p>In formal terms, this means that Python is dynamically typed , a model that keeps track of types for you automatically instead of requiring declaration code, but it is also strongly typed, a constraint that means you can perform on an object only operations that are valid for its type.</p><h2 id="core-types" tabindex="-1"><a class="header-anchor" href="#core-types" aria-hidden="true">#</a> Core Types</h2><p>Immutable: number, string, tuple, bytes<br> Mutable: list, dictionary, set, bytearray</p><p>Primitive: number<br> Collection:</p><ul><li><p>Sequence: string, tuple, bytes, list, bytearray</p></li><li><p>Mapping: dictionary, set</p></li></ul><p>bytearray is a distinct hybrid of immutable bytes strings (whose b&#39;...&#39; syntax is required in 3.X and optional in 2.X) and mutable lists (coded and displayed in [] ).</p><p>Generic operations that span multiple types show up as built-in functions or expressions (e.g. <code>len(X)</code> , <code>X[0]</code> ), but type-specific operations are method calls (e.g., <code>aString.upper()</code> ).</p><p>Both <code>dir</code> and <code>help</code> also accept as arguments either a real object (like our string S) , or the name of a data type (like str , list , and dict ).</p><p>As a notable difference, Python 2.X allows its normal and Unicode strings to be mixed in expressions as long as the normal string is all ASCII; in contrast, Python 3.X has a tighter model that never allows its normal and byte strings to mix without explicit conversion.</p><p>None of the string object’s own methods support pattern-based text processing.</p><p>Unlike out-of-bounds assignments in lists, which are forbidden, assignments to new dictionary keys create those keys, fetching a nonexistent key is still a mistake. (Use the get() method)</p><p>A file’s contents are always a string in your script, regardless of the type of data the file contains:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&#39;data.txt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Text files represent content as normal str strings and perform unicode encoding and decoding automatically when writing and reading data, while binary files represent content as a special bytes string and allow you to access file content unaltered.</p><p>Sets are unordered collections of unique and immutable objects.<br> Decimal, Fraction, booleans</p><p>As you’ll learn, in Python, we code to object interfaces (operations supported), not to types.</p><h2 id="numbers" tabindex="-1"><a class="header-anchor" href="#numbers" aria-hidden="true">#</a> Numbers</h2><p><img src="/assets/img/2018-09-03-12-09-34.dda1cc60.png" alt="Table 5-1"></p><p>Floating-point numbers are implemented as C “doubles” in standard CPython, and therefore get as much precision as the C compiler used to build the Python interpreter gives to doubles.</p><p>built-in calls: <code>hex(I)</code>, <code>oct(I)</code>, <code>bin(I)</code>, <code>int(str,base)</code>, <code>X.bit_length()</code>, <code>round(X)</code>, <code>X.as_integer_ratio()</code></p><p>Internally, complex numbers are implemented as pairs of floating-point numbers</p><p><img src="/assets/img/2018-09-03-12-10-38.39a27a74.png" alt="Table 5-2"></p><p>Comparison operators may be chained: X &lt; Y &lt; Z produces the same result as X &lt; Y and Y &lt; Z .</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token comment"># Same as: 1 == 2 and 2 &lt; 3</span>
<span class="token boolean">False</span>    <span class="token comment"># Not same as: False &lt; 3 (which means 0 &lt; 3, which is true!)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Note that <code>-x</code> precedes <code>x//y</code></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">3</span><span class="token operator">//</span><span class="token number">2</span>
<span class="token operator">-</span><span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">0</span><span class="token operator">-</span><span class="token number">3</span><span class="token operator">//</span><span class="token number">2</span>
<span class="token operator">-</span><span class="token number">1</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>In recent Pythons, the slice expression X[I:J:K] is equivalent to indexing with a slice object: X[slice(I, J, K)].</p><p>In Python 3.X, nonnumeric mixed-type magnitude comparisons are not allowed and raise exceptions; this includes sorts by proxy.</p><ul><li>Operators lower in the table have higher precedence, and so bind more tightly in mixed expressions.</li><li>Operators in the same row in Table 5-2 generally group from left to right when combined (except for exponentiation, which groups right to left, and comparisons, which chain left to right).</li></ul><p>Besides mixing operators in expressions, you can also mix numeric types: in mixed-type numeric expressions, Python first converts operands up to the type of the most complicated operand, and then performs the math on same-type operands. Python ranks the complexity of numeric types like so: integers are simpler than floating point numbers, which are simpler than complex numbers.</p><p>In general, Python does not convert across any other type boundaries automatically. Adding a string to an integer, for example, results in an error, unless you manually convert one or the other.</p><p>In 3.X, the / now always performs true division, returning a float result that includes any remainder, regardless of operand types. The // performs floor division, which truncates the remainder and returns an integer for integer operands or a float if any operand is a float.</p><p>The // operator truncates the result down to its floor, which means the closest whole number below the true result.</p><p>Frozenset</p><p>Internally, the names True and False are instances of bool , which is in turn just a subclass (in the object oriented sense) of the built-in integer type int . True and False behave exactly like the integers 1 and 0, except that they have customized printing logic.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; True + 4 # (Hmmm)
5
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Numpy, Scipy</p><p>The dynamic typing:<br> A variable never has any type information or constraints associated with it. The notion of type lives with objects, not names. Variables are generic in nature; they always simply refer to a particular object at a particular point in time.</p><p>Variables always link to objects and never to other variables, but larger objects may link to other objects (for instance, a list object has links to the objects it contains). These links from variables to objects are called references in Python—that is, a reference is a kind of association, implemented as a pointer in memory</p><p>Technically speaking, objects have more structure than just enough space to represent their values. Each object also has two standard header fields: a ==type designator== used to mark the type of the object, and a ==reference counter== used to determine when it’s OK to reclaim the object.</p><p>reference counter, cyclic reference<br><code>sys.getrefcount(X)</code></p><p>If a[:], a[k] appears in expression, they are copied. e.g. after b=a[:3], b refers to a new object. If a[:], a[k] appears in left side of assignment, they referred to the original object. e.g. after a=[0,1,2] a[:] = [0,1], a becomes [0,1]</p><p>Because everything seems to work by assignment and references in Python, a basic understanding of this model is useful in many different contexts. As you’ll see, it works the same in assignment statements, function arguments, for loop variables, module imports, class attributes, and more. The good news is that there is just one assignment model in Python;</p><h3 id="注意slice的陷阱" tabindex="-1"><a class="header-anchor" href="#注意slice的陷阱" aria-hidden="true">#</a> 注意slice的陷阱</h3><p>In s[i:j:k], if <code>i</code> or <code>j</code> is negative, the index is relative to the end of sequence <code>s</code>: <code>len(s) + i</code> or <code>len(s) + j</code> is substituted. But note that <code>-0</code> is still <code>0</code>.</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>s <span class="token operator">=</span> <span class="token string">&quot;abcdefg&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># &#39;&#39;, not &#39;ba&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>weakref</p><h2 id="string" tabindex="-1"><a class="header-anchor" href="#string" aria-hidden="true">#</a> String</h2><p><img src="/assets/img/2018-09-03-12-13-34.3544cde7.png" alt=""></p><p><img src="/assets/img/2018-09-03-16-34-23.a05db962.png" alt="Table 7-1"> String literal forms:</p><ul><li>Single quotes: &#39;spa&quot;m&#39;</li><li>Double quotes: &quot;spa&#39;m&quot;</li><li>Triple quotes: &#39;&#39;&#39;... spam ...&#39;&#39;&#39; , &quot;&quot;&quot;... spam ...&quot;&quot;&quot;</li><li>Escape sequences: &quot;s\tp\na\0m&quot;</li><li>Raw strings: r&quot;C:\new\test.spm&quot;</li><li>Bytes literals in 3.X and 2.6+ (see Chapter 4 , Chapter 37 ): b&#39;sp\x01am&#39;</li><li>Unicode literals in 2.X and 3.3+ (see Chapter 4 , Chapter 37 ): u&#39;eggs\u0020spam&#39;</li></ul><p>In fact, 3.X defines str strings formally as sequences of Unicode code points, not bytes, to make this clear. There’s more on how strings are stored internally in Chapter 37 if you care to know.</p><p><img src="/assets/img/2018-09-03-12-14-52.dcc80ac0.png" alt="Table 7-2"></p><p>Some escape sequences allow you to embed absolute binary values into the characters of a string.</p><p>Python keeps both the string’s length and text in memory. In fact, no character terminates a string in Python</p><p>Notice that Python displays nonprintable characters in hex, regardless of how they were specified.</p><p>That is, r&quot;...&quot; is not a valid string literal—a raw string cannot end in an odd number of backslashes. If you need to end a raw string with a single backslash, you can use two and slice off the second (r&#39;1\nb\tc\&#39;[:-1]), tack one on manually (r&#39;1\nb\tc&#39; + &#39;\&#39;), or skip the raw string syntax and just double up the backslashes in a normal string (&#39;1\nb\tc\&#39;).</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; menu = &quot;&quot;&quot;spam # comments here added to string!
... eggs # ditto
... &quot;&quot;&quot;
&gt;&gt;&gt; menu
&#39;spam # comments here added to string!\neggs # ditto\n&#39;
&gt;&gt;&gt; menu = (
... &quot;spam\n&quot; # comments here ignored
... &quot;eggs\n&quot; # but newlines not automatic
... )
&gt;&gt;&gt; menu
&#39;spam\neggs\n&#39;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>built-in tool: <code>ord()</code> <code>chr()</code></p><p>The method call expression: object.method(arguments) is evaluated from left to right—Python will first fetch the method of the object and then call it, passing in both object and the arguments</p><p>string formatting expressions and string formatting method calls<br> Technically, the format built-in runs the subject object’s <code>__format__</code> method, which the str.format method does internally for each formatted item. The % expressions tend to be a bit simpler and more concise; the format method has a handful of advanced features that the % expression does not, but even more involved formatting still seems to be essentially a draw in terms of complexity.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; from formats import commas, money
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Types Share Operation Sets by Categories:</p><ul><li>numbers</li><li>sequences</li><li>mappings</li></ul><h2 id="lists-and-dictionaries" tabindex="-1"><a class="header-anchor" href="#lists-and-dictionaries" aria-hidden="true">#</a> Lists and Dictionaries</h2><p><img src="/assets/img/2018-09-03-12-17-54.9a7ba190.png" alt=""><img src="/assets/img/2018-09-03-16-35-48.5759daab.png" alt="Table 8-1"> Slice assignment, the last operation in the preceding example, replaces an entire section of a list in a single step. Because it can be a bit complex, it is perhaps best thought of as a combination of two steps:</p><ol><li>Deletion. The slice you specify to the left of the = is deleted.</li><li>Insertion. The new items contained in the iterable object to the right of the = are inserted into the list on the left, at the place where the old slice was deleted. Note, L[2:5]=L[3:6], for instance, works fine because the value to be inserted is fetched before the deletion happens on the left.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; L = [1]
&gt;&gt;&gt; L[:0] = [2, 3, 4] # Insert all at :0, an empty slice at front
&gt;&gt;&gt; L
[2, 3, 4, 1]
&gt;&gt;&gt; L[len(L):] = [5, 6, 7] # Insert all at len(L):, an empty slice at end
&gt;&gt;&gt; L
[2, 3, 4, 1, 5, 6, 7]
&gt;&gt;&gt; L.extend([8, 9, 10]) # Insert all at end, named method
&gt;&gt;&gt; L
[2, 3, 4, 1, 5, 6, 7, 8, 9, 10]
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>The effect of <code>L.append(X)</code> is similar to <code>L+[X]</code>, but while the former changes L in place, the latter makes a new list.</p><p>L.sort() vs. sorted<br> built-in tools: reversed</p><p>Like lists, dictionaries store object references (not copies, unless you ask for them explicitly)</p><p><img src="/assets/img/2018-09-03-12-18-20.f9085a23.png" alt="Table 8-2"></p><p>keys in 3.X returns an iterable object, instead of a physical list Unlike lists, however, whenever you assign a new dictionary key (one that hasn’t been assigned before) you create a new entry in the dictionary.</p><p>In 3.X the dictionary keys , values , and items methods all return view objects , whereas in 2.X they return actual result lists. Besides being iterable, dictionary views also retain the original order of dictionary components, reflect future changes to the dictionary, and may support set operations. Unlike 2.X’s list results, though, dictionary views in 3.X are not carved in stone when created—they dynamically reflect future changes made to the dictionary after the view object has been created:</p><p>In set operations, views may be mixed with other views, sets, and dictionaries; dictionaries are treated the same as their keys views in this context:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; D = {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3}
&gt;&gt;&gt; D.keys() &amp; D.keys() # Intersect keys views
{&#39;b&#39;, &#39;c&#39;, &#39;a&#39;}
&gt;&gt;&gt; D.keys() &amp; {&#39;b&#39;} # Intersect keys and set
{&#39;b&#39;}
&gt;&gt;&gt; D.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; Ks.sort()
AttributeError: &#39;dict_keys&#39; object has no attribute &#39;sort&#39;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>To work around this, in 3.X you must either convert to a list manually or use the sorted call (introduced in Chapter 4 and covered in this chapter) on either a keys view or the dictionary itself:</p><p>OrderedDict</p><h2 id="tuples-files-and-everything-else" tabindex="-1"><a class="header-anchor" href="#tuples-files-and-everything-else" aria-hidden="true">#</a> Tuples, files and everything else</h2><p><img src="/assets/img/2018-09-03-16-36-56.ca4c61be.png" alt=""><img src="/assets/img/2018-09-03-12-18-57.810a9d6f.png" alt="Table 9-1"></p><p>As you can see, named tuples are a tuple/class/dictionary hybrid (In short, named tuples build new classes that extend the tuple type, inserting a property accessor method for each named field that maps the name to its position)</p><p><img src="/assets/img/2018-09-03-12-03-26.84b60b94.png" alt="Table 9-2"></p><p>Empty lines in the file come back as strings containing just a newline character, not as empty strings.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; myfile.readline() # Empty string: end-of-file
&#39;&#39;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>Text files represent content as normal str strings, perform Unicode encoding and decoding automatically, and perform end-of-line translation by default.</li><li>Binary files represent content as a special bytes string type and allow programs to access file content unaltered.</li></ul><p>pickle, shelve, json, struct</p><p>In fact, when nested objects are present, Python automatically traverses data structures to apply comparisons from left to right, and as deeply as needed.</p><p>More specifically, Python compares types as follows:</p><ul><li>Numbers are compared by relative magnitude, after conversion to the common highest type if needed.</li><li>Strings are compared lexicographically (by the character set code point values returned by <code>ord</code> ), and character by character until the end or first mismatch (&quot;abc&quot;&lt; &quot;ac&quot; ).</li><li>Lists and tuples are compared by comparing each component from left to right, and recursively for nested structures, until the end or first mismatch ([2] &gt; [1, 2] ).</li><li>Sets are equal if both contain the same items (formally, if each is a subset of the other), and set relative magnitude comparisons apply subset and superset tests.</li><li>Dictionaries compare as equal if their sorted (key, value) lists are equal. Relative magnitude comparisons are not supported for dictionaries in Python 3.X, but they work in 2.X as though comparing sorted (key, value) lists.</li><li>Nonnumeric mixed-type magnitude comparisons (e.g., 1 &lt; &#39;spam&#39; ) are errors in Python 3.X. They are allowed in Python 2.X, but use a fixed but arbitrary ordering rule based on type name string. By proxy, this also applies to sorts, which use comparisons internally: nonnumeric mixed-type collections cannot be sorted in 3.X.</li></ul><p>Python 3.X disallows mixed-type magnitude testing, except numeric types.</p><p>More generally, the notions of true and false are intrinsic properties of every object in Python—each object is either true or false, as follows:</p><ul><li>Numbers are false if zero, and true otherwise.</li><li>Other objects are false if empty, and true otherwise.</li></ul><p>That is, <em>None</em> is something, not nothing (despite its name!)—it is a real object and a real piece of memory that is created and given a built-in name by Python itself.</p><p>In fact, even types themselves are an object type in Python. Calls to these names are really object constructor calls, not simply conversion functions, though you can treat them as simple functions for basic usage.</p><p>For classic classes in Python 2.X, all class instances are instead of the type “instance,” and we must compare instance <code>__class__</code> attributes to compare their types meaningfully.</p><p>Repetition Adds One Level Deep</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> X <span class="token operator">=</span> L <span class="token operator">*</span> <span class="token number">4</span> <span class="token comment"># Like [4, 5, 6] + [4, 5, 6] + ...</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Y <span class="token operator">=</span> <span class="token punctuation">[</span>L<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token comment"># [L] + [L] + ... = [L, L,...]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>If you remember that repetition, concatenation, and slicing copy only the top level of their operand objects, these sorts of cases make much more sense</p><p>Beware of Cyclic Data Structure</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;grail&#39;</span><span class="token punctuation">]</span> <span class="token comment"># Append reference to same object</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L<span class="token punctuation">.</span>append<span class="token punctuation">(</span>L<span class="token punctuation">)</span> <span class="token comment"># Generates cycle in object: [...]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L
<span class="token punctuation">[</span><span class="token string">&#39;grail&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/iguyong/iguyong.github.io/edit/main/docs/python/notes_for_learning_python/2_Types-and-Operations.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">11/24/2021, 8:54:40 AM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: jcel@qq.com">guyong</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.e9b55bcc.js" defer></script><script src="/assets/js/1812.2c59b7ed.js" defer></script><script src="/assets/js/app.cdc4364a.js" defer></script>
  </body>
</html>
